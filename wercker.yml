box: ros:kinetic

build:
  steps:
    - install-packages:
      packages: devscripts fakeroot python-bloom
    - script:
      name: setup ros environments
      code: |
        source /opt/ros/kinetic/setup.bash
        mkdir -p /root/catkin_ws/src
        cd /root/catkin_ws/src
        catkin_init_workspace
    - groove-x/catkin-make:
      catkin_ws_path: /root/catkin_ws
    - script:
      name: run tests
      code: |
        source /root/catkin_ws/devel/setup.bash
        nosetests -svw gx_sound_player/test/
    - groove-x/bloom-generate:
      os_name: ubuntu
      os_version: xenial
      ros_distro: kinetic
